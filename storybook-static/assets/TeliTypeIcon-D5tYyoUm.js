import{j as Se}from"./jsx-runtime-Nms4Y4qS.js";import{u as et}from"./OntologyStyles-DPshq307.js";import{A as tt}from"./Avatar-e-pslTjb.js";var at=Object.defineProperty,st=(a,e,t)=>e in a?at(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,x=(a,e,t)=>(st(a,typeof e!="symbol"?e+"":e,t),t),rt=(a,e,t)=>{if(!e.has(a))throw TypeError("Cannot "+t)},nt=(a,e,t)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,t)},it=(a,e,t)=>(rt(a,e,"access private method"),t),_;(function(a){a.assertEqual=r=>r;function e(r){}a.assertIs=e;function t(r){throw new Error}a.assertNever=t,a.arrayToEnum=r=>{const n={};for(const i of r)n[i]=i;return n},a.getValidEnumValues=r=>{const n=a.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),i={};for(const o of n)i[o]=r[o];return a.objectValues(i)},a.objectValues=r=>a.objectKeys(r).map(function(n){return r[n]}),a.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const n=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.push(i);return n},a.find=(r,n)=>{for(const i of r)if(n(i))return i},a.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function s(r,n=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(n)}a.joinValues=s,a.jsonStringifyReplacer=(r,n)=>typeof n=="bigint"?n.toString():n})(_||(_={}));var Ze;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(Ze||(Ze={}));const c=_.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),U=a=>{switch(typeof a){case"undefined":return c.undefined;case"string":return c.string;case"number":return isNaN(a)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":return Array.isArray(a)?c.array:a===null?c.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?c.promise:typeof Map<"u"&&a instanceof Map?c.map:typeof Set<"u"&&a instanceof Set?c.set:typeof Date<"u"&&a instanceof Date?c.date:c.object;default:return c.unknown}},l=_.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ot=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:");class R extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(n){return n.message},s={_errors:[]},r=n=>{for(const i of n.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)s._errors.push(t(i));else{let o=s,u=0;for(;u<i.path.length;){const p=i.path[u];u===i.path.length-1?(o[p]=o[p]||{_errors:[]},o[p]._errors.push(t(i))):o[p]=o[p]||{_errors:[]},o=o[p],u++}}};return r(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,_.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}R.create=a=>new R(a);const Y=(a,e)=>{let t;switch(a.code){case l.invalid_type:a.received===c.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case l.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,_.jsonStringifyReplacer)}`;break;case l.unrecognized_keys:t=`Unrecognized key(s) in object: ${_.joinValues(a.keys,", ")}`;break;case l.invalid_union:t="Invalid input";break;case l.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${_.joinValues(a.options)}`;break;case l.invalid_enum_value:t=`Invalid enum value. Expected ${_.joinValues(a.options)}, received '${a.received}'`;break;case l.invalid_arguments:t="Invalid function arguments";break;case l.invalid_return_type:t="Invalid function return type";break;case l.invalid_date:t="Invalid date";break;case l.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:_.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case l.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case l.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case l.custom:t="Invalid input";break;case l.invalid_intersection_types:t="Intersection results could not be merged";break;case l.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case l.not_finite:t="Number must be finite";break;default:t=e.defaultError,_.assertNever(a)}return{message:t}};let Me=Y;function dt(a){Me=a}function ye(){return Me}const ge=a=>{const{data:e,path:t,errorMaps:s,issueData:r}=a,n=[...t,...r.path||[]],i={...r,path:n};let o="";const u=s.filter(p=>!!p).slice().reverse();for(const p of u)o=p(i,{data:e,defaultError:o}).message;return{...r,path:n,message:r.message||o}},lt=[];function h(a,e){const t=ge({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,ye(),Y].filter(s=>!!s)});a.common.issues.push(t)}class S{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const r of t){if(r.status==="aborted")return y;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const r of t)s.push({key:await r.key,value:await r.value});return S.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const r of t){const{key:n,value:i}=r;if(n.status==="aborted"||i.status==="aborted")return y;n.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(s[n.value]=i.value)}return{status:e.value,value:s}}}const y=Object.freeze({status:"aborted"}),ze=a=>({status:"dirty",value:a}),C=a=>({status:"valid",value:a}),Re=a=>a.status==="aborted",Oe=a=>a.status==="dirty",ee=a=>a.status==="valid",ve=a=>typeof Promise<"u"&&a instanceof Promise;var m;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(m||(m={}));class N{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ne=(a,e)=>{if(ee(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new R(a.common.issues);return this._error=t,this._error}}};function g(a){if(!a)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(n,i)=>n.code!=="invalid_type"?{message:i.defaultError}:typeof i.data>"u"?{message:s??i.defaultError}:{message:t??i.defaultError},description:r}}class v{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return U(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:U(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new S,ctx:{common:e.parent.common,data:e.data,parsedType:U(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ve(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const r={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U(e)},n=this._parseSync({data:e,path:r.path,parent:r});return Ne(r,n)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U(e)},r=this._parse({data:e,path:s.path,parent:s}),n=await(ve(r)?r:Promise.resolve(r));return Ne(s,n)}refine(e,t){const s=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,n)=>{const i=e(r),o=()=>n.addIssue({code:l.custom,...s(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(u=>u?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,r)=>e(s)?!0:(r.addIssue(typeof t=="function"?t(s,r):t),!1))}_refinement(e){return new j({schema:this,typeName:f.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return L.create(this,this._def)}nullable(){return B.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return O.create(this,this._def)}promise(){return X.create(this,this._def)}or(e){return re.create([this,e],this._def)}and(e){return ne.create(this,e,this._def)}transform(e){return new j({...g(this._def),schema:this,typeName:f.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new ue({...g(this._def),innerType:this,defaultValue:t,typeName:f.ZodDefault})}brand(){return new We({typeName:f.ZodBranded,type:this,...g(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new xe({...g(this._def),innerType:this,catchValue:t,typeName:f.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return he.create(this,e)}readonly(){return Ee.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ut=/^c[^\s-]{8,}$/i,ct=/^[a-z][a-z0-9]*$/,ht=/^[0-9A-HJKMNP-TV-Z]{26}$/,pt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mt=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ft="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ce;const yt=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,gt=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,vt=a=>a.precision?a.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${a.precision}}Z$`):a.precision===0?a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):a.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function _t(a,e){return!!((e==="v4"||!e)&&yt.test(a)||(e==="v6"||!e)&&gt.test(a))}class Z extends v{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==c.string){const r=this._getOrReturnCtx(e);return h(r,{code:l.invalid_type,expected:c.string,received:r.parsedType}),y}const t=new S;let s;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:l.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind==="max")e.data.length>r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:l.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(r.kind==="length"){const n=e.data.length>r.value,i=e.data.length<r.value;(n||i)&&(s=this._getOrReturnCtx(e,s),n?h(s,{code:l.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):i&&h(s,{code:l.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if(r.kind==="email")mt.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"email",code:l.invalid_string,message:r.message}),t.dirty());else if(r.kind==="emoji")Ce||(Ce=new RegExp(ft,"u")),Ce.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"emoji",code:l.invalid_string,message:r.message}),t.dirty());else if(r.kind==="uuid")pt.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"uuid",code:l.invalid_string,message:r.message}),t.dirty());else if(r.kind==="cuid")ut.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"cuid",code:l.invalid_string,message:r.message}),t.dirty());else if(r.kind==="cuid2")ct.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"cuid2",code:l.invalid_string,message:r.message}),t.dirty());else if(r.kind==="ulid")ht.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"ulid",code:l.invalid_string,message:r.message}),t.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),h(s,{validation:"url",code:l.invalid_string,message:r.message}),t.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"regex",code:l.invalid_string,message:r.message}),t.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(s=this._getOrReturnCtx(e,s),h(s,{code:l.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(s=this._getOrReturnCtx(e,s),h(s,{code:l.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(s=this._getOrReturnCtx(e,s),h(s,{code:l.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):r.kind==="datetime"?vt(r).test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{code:l.invalid_string,validation:"datetime",message:r.message}),t.dirty()):r.kind==="ip"?_t(e.data,r.version)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"ip",code:l.invalid_string,message:r.message}),t.dirty()):_.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:l.invalid_string,...m.errToObj(s)})}_addCheck(e){return new Z({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...m.errToObj(e)})}url(e){return this._addCheck({kind:"url",...m.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...m.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...m.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...m.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...m.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...m.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...m.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...m.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...m.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...m.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...m.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...m.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...m.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...m.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...m.errToObj(t)})}nonempty(e){return this.min(1,m.errToObj(e))}trim(){return new Z({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Z({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Z({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Z.create=a=>{var e;return new Z({checks:[],typeName:f.ZodString,coerce:(e=a==null?void 0:a.coerce)!==null&&e!==void 0?e:!1,...g(a)})};function bt(a,e){const t=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,n=parseInt(a.toFixed(r).replace(".","")),i=parseInt(e.toFixed(r).replace(".",""));return n%i/Math.pow(10,r)}class M extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==c.number){const r=this._getOrReturnCtx(e);return h(r,{code:l.invalid_type,expected:c.number,received:r.parsedType}),y}let t;const s=new S;for(const r of this._def.checks)r.kind==="int"?_.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),h(t,{code:l.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:l.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:l.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):r.kind==="multipleOf"?bt(e.data,r.value)!==0&&(t=this._getOrReturnCtx(e,t),h(t,{code:l.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),h(t,{code:l.not_finite,message:r.message}),s.dirty()):_.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,m.toString(t))}gt(e,t){return this.setLimit("min",e,!1,m.toString(t))}lte(e,t){return this.setLimit("max",e,!0,m.toString(t))}lt(e,t){return this.setLimit("max",e,!1,m.toString(t))}setLimit(e,t,s,r){return new M({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:m.toString(r)}]})}_addCheck(e){return new M({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:m.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:m.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:m.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:m.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:m.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:m.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:m.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:m.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:m.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}M.create=a=>new M({checks:[],typeName:f.ZodNumber,coerce:(a==null?void 0:a.coerce)||!1,...g(a)});class z extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==c.bigint){const r=this._getOrReturnCtx(e);return h(r,{code:l.invalid_type,expected:c.bigint,received:r.parsedType}),y}let t;const s=new S;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:l.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),h(t,{code:l.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),h(t,{code:l.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):_.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,m.toString(t))}gt(e,t){return this.setLimit("min",e,!1,m.toString(t))}lte(e,t){return this.setLimit("max",e,!0,m.toString(t))}lt(e,t){return this.setLimit("max",e,!1,m.toString(t))}setLimit(e,t,s,r){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:m.toString(r)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:m.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:m.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:m.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:m.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:m.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}z.create=a=>{var e;return new z({checks:[],typeName:f.ZodBigInt,coerce:(e=a==null?void 0:a.coerce)!==null&&e!==void 0?e:!1,...g(a)})};class te extends v{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==c.boolean){const t=this._getOrReturnCtx(e);return h(t,{code:l.invalid_type,expected:c.boolean,received:t.parsedType}),y}return C(e.data)}}te.create=a=>new te({typeName:f.ZodBoolean,coerce:(a==null?void 0:a.coerce)||!1,...g(a)});class F extends v{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==c.date){const r=this._getOrReturnCtx(e);return h(r,{code:l.invalid_type,expected:c.date,received:r.parsedType}),y}if(isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return h(r,{code:l.invalid_date}),y}const t=new S;let s;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:l.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:l.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):_.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new F({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:m.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:m.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}F.create=a=>new F({checks:[],coerce:(a==null?void 0:a.coerce)||!1,typeName:f.ZodDate,...g(a)});class _e extends v{_parse(e){if(this._getType(e)!==c.symbol){const t=this._getOrReturnCtx(e);return h(t,{code:l.invalid_type,expected:c.symbol,received:t.parsedType}),y}return C(e.data)}}_e.create=a=>new _e({typeName:f.ZodSymbol,...g(a)});class ae extends v{_parse(e){if(this._getType(e)!==c.undefined){const t=this._getOrReturnCtx(e);return h(t,{code:l.invalid_type,expected:c.undefined,received:t.parsedType}),y}return C(e.data)}}ae.create=a=>new ae({typeName:f.ZodUndefined,...g(a)});class se extends v{_parse(e){if(this._getType(e)!==c.null){const t=this._getOrReturnCtx(e);return h(t,{code:l.invalid_type,expected:c.null,received:t.parsedType}),y}return C(e.data)}}se.create=a=>new se({typeName:f.ZodNull,...g(a)});class J extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return C(e.data)}}J.create=a=>new J({typeName:f.ZodAny,...g(a)});class q extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return C(e.data)}}q.create=a=>new q({typeName:f.ZodUnknown,...g(a)});class A extends v{_parse(e){const t=this._getOrReturnCtx(e);return h(t,{code:l.invalid_type,expected:c.never,received:t.parsedType}),y}}A.create=a=>new A({typeName:f.ZodNever,...g(a)});class be extends v{_parse(e){if(this._getType(e)!==c.undefined){const t=this._getOrReturnCtx(e);return h(t,{code:l.invalid_type,expected:c.void,received:t.parsedType}),y}return C(e.data)}}be.create=a=>new be({typeName:f.ZodVoid,...g(a)});class O extends v{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==c.array)return h(t,{code:l.invalid_type,expected:c.array,received:t.parsedType}),y;if(r.exactLength!==null){const i=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(i||o)&&(h(t,{code:i?l.too_big:l.too_small,minimum:o?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(h(t,{code:l.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(h(t,{code:l.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>r.type._parseAsync(new N(t,i,t.path,o)))).then(i=>S.mergeArray(s,i));const n=[...t.data].map((i,o)=>r.type._parseSync(new N(t,i,t.path,o)));return S.mergeArray(s,n)}get element(){return this._def.type}min(e,t){return new O({...this._def,minLength:{value:e,message:m.toString(t)}})}max(e,t){return new O({...this._def,maxLength:{value:e,message:m.toString(t)}})}length(e,t){return new O({...this._def,exactLength:{value:e,message:m.toString(t)}})}nonempty(e){return this.min(1,e)}}O.create=(a,e)=>new O({type:a,minLength:null,maxLength:null,exactLength:null,typeName:f.ZodArray,...g(e)});function H(a){if(a instanceof k){const e={};for(const t in a.shape){const s=a.shape[t];e[t]=L.create(H(s))}return new k({...a._def,shape:()=>e})}else return a instanceof O?new O({...a._def,type:H(a.element)}):a instanceof L?L.create(H(a.unwrap())):a instanceof B?B.create(H(a.unwrap())):a instanceof $?$.create(a.items.map(e=>H(e))):a}class k extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=_.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==c.object){const u=this._getOrReturnCtx(e);return h(u,{code:l.invalid_type,expected:c.object,received:u.parsedType}),y}const{status:t,ctx:s}=this._processInputParams(e),{shape:r,keys:n}=this._getCached(),i=[];if(!(this._def.catchall instanceof A&&this._def.unknownKeys==="strip"))for(const u in s.data)n.includes(u)||i.push(u);const o=[];for(const u of n){const p=r[u],b=s.data[u];o.push({key:{status:"valid",value:u},value:p._parse(new N(s,b,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof A){const u=this._def.unknownKeys;if(u==="passthrough")for(const p of i)o.push({key:{status:"valid",value:p},value:{status:"valid",value:s.data[p]}});else if(u==="strict")i.length>0&&(h(s,{code:l.unrecognized_keys,keys:i}),t.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const p of i){const b=s.data[p];o.push({key:{status:"valid",value:p},value:u._parse(new N(s,b,s.path,p)),alwaysSet:p in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const p of o){const b=await p.key;u.push({key:b,value:await p.value,alwaysSet:p.alwaysSet})}return u}).then(u=>S.mergeObjectSync(t,u)):S.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return m.errToObj,new k({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var r,n,i,o;const u=(i=(n=(r=this._def).errorMap)===null||n===void 0?void 0:n.call(r,t,s).message)!==null&&i!==void 0?i:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=m.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new k({...this._def,unknownKeys:"strip"})}passthrough(){return new k({...this._def,unknownKeys:"passthrough"})}extend(e){return new k({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new k({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:f.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new k({...this._def,catchall:e})}pick(e){const t={};return _.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new k({...this._def,shape:()=>t})}omit(e){const t={};return _.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new k({...this._def,shape:()=>t})}deepPartial(){return H(this)}partial(e){const t={};return _.objectKeys(this.shape).forEach(s=>{const r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}),new k({...this._def,shape:()=>t})}required(e){const t={};return _.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof L;)r=r._def.innerType;t[s]=r}}),new k({...this._def,shape:()=>t})}keyof(){return Ve(_.objectKeys(this.shape))}}k.create=(a,e)=>new k({shape:()=>a,unknownKeys:"strip",catchall:A.create(),typeName:f.ZodObject,...g(e)});k.strictCreate=(a,e)=>new k({shape:()=>a,unknownKeys:"strict",catchall:A.create(),typeName:f.ZodObject,...g(e)});k.lazycreate=(a,e)=>new k({shape:a,unknownKeys:"strip",catchall:A.create(),typeName:f.ZodObject,...g(e)});class re extends v{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function r(n){for(const o of n)if(o.result.status==="valid")return o.result;for(const o of n)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=n.map(o=>new R(o.ctx.common.issues));return h(t,{code:l.invalid_union,unionErrors:i}),y}if(t.common.async)return Promise.all(s.map(async n=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await n._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(r);{let n;const i=[];for(const u of s){const p={...t,common:{...t.common,issues:[]},parent:null},b=u._parseSync({data:t.data,path:t.path,parent:p});if(b.status==="valid")return b;b.status==="dirty"&&!n&&(n={result:b,ctx:p}),p.common.issues.length&&i.push(p.common.issues)}if(n)return t.common.issues.push(...n.ctx.common.issues),n.result;const o=i.map(u=>new R(u));return h(t,{code:l.invalid_union,unionErrors:o}),y}}get options(){return this._def.options}}re.create=(a,e)=>new re({options:a,typeName:f.ZodUnion,...g(e)});const me=a=>a instanceof oe?me(a.schema):a instanceof j?me(a.innerType()):a instanceof de?[a.value]:a instanceof V?a.options:a instanceof le?Object.keys(a.enum):a instanceof ue?me(a._def.innerType):a instanceof ae?[void 0]:a instanceof se?[null]:null;class Te extends v{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.object)return h(t,{code:l.invalid_type,expected:c.object,received:t.parsedType}),y;const s=this.discriminator,r=t.data[s],n=this.optionsMap.get(r);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(h(t,{code:l.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const r=new Map;for(const n of t){const i=me(n.shape[e]);if(!i)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);r.set(o,n)}}return new Te({typeName:f.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...g(s)})}}function je(a,e){const t=U(a),s=U(e);if(a===e)return{valid:!0,data:a};if(t===c.object&&s===c.object){const r=_.objectKeys(e),n=_.objectKeys(a).filter(o=>r.indexOf(o)!==-1),i={...a,...e};for(const o of n){const u=je(a[o],e[o]);if(!u.valid)return{valid:!1};i[o]=u.data}return{valid:!0,data:i}}else if(t===c.array&&s===c.array){if(a.length!==e.length)return{valid:!1};const r=[];for(let n=0;n<a.length;n++){const i=a[n],o=e[n],u=je(i,o);if(!u.valid)return{valid:!1};r.push(u.data)}return{valid:!0,data:r}}else return t===c.date&&s===c.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}class ne extends v{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=(n,i)=>{if(Re(n)||Re(i))return y;const o=je(n.value,i.value);return o.valid?((Oe(n)||Oe(i))&&t.dirty(),{status:t.value,value:o.data}):(h(s,{code:l.invalid_intersection_types}),y)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([n,i])=>r(n,i)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}ne.create=(a,e,t)=>new ne({left:a,right:e,typeName:f.ZodIntersection,...g(t)});class $ extends v{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==c.array)return h(s,{code:l.invalid_type,expected:c.array,received:s.parsedType}),y;if(s.data.length<this._def.items.length)return h(s,{code:l.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),y;!this._def.rest&&s.data.length>this._def.items.length&&(h(s,{code:l.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((n,i)=>{const o=this._def.items[i]||this._def.rest;return o?o._parse(new N(s,n,s.path,i)):null}).filter(n=>!!n);return s.common.async?Promise.all(r).then(n=>S.mergeArray(t,n)):S.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new $({...this._def,rest:e})}}$.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $({items:a,typeName:f.ZodTuple,rest:null,...g(e)})};class ie extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==c.object)return h(s,{code:l.invalid_type,expected:c.object,received:s.parsedType}),y;const r=[],n=this._def.keyType,i=this._def.valueType;for(const o in s.data)r.push({key:n._parse(new N(s,o,s.path,o)),value:i._parse(new N(s,s.data[o],s.path,o))});return s.common.async?S.mergeObjectAsync(t,r):S.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof v?new ie({keyType:e,valueType:t,typeName:f.ZodRecord,...g(s)}):new ie({keyType:Z.create(),valueType:e,typeName:f.ZodRecord,...g(t)})}}class we extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==c.map)return h(s,{code:l.invalid_type,expected:c.map,received:s.parsedType}),y;const r=this._def.keyType,n=this._def.valueType,i=[...s.data.entries()].map(([o,u],p)=>({key:r._parse(new N(s,o,s.path,[p,"key"])),value:n._parse(new N(s,u,s.path,[p,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const u of i){const p=await u.key,b=await u.value;if(p.status==="aborted"||b.status==="aborted")return y;(p.status==="dirty"||b.status==="dirty")&&t.dirty(),o.set(p.value,b.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const u of i){const p=u.key,b=u.value;if(p.status==="aborted"||b.status==="aborted")return y;(p.status==="dirty"||b.status==="dirty")&&t.dirty(),o.set(p.value,b.value)}return{status:t.value,value:o}}}}we.create=(a,e,t)=>new we({valueType:e,keyType:a,typeName:f.ZodMap,...g(t)});class K extends v{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==c.set)return h(s,{code:l.invalid_type,expected:c.set,received:s.parsedType}),y;const r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(h(s,{code:l.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(h(s,{code:l.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const n=this._def.valueType;function i(u){const p=new Set;for(const b of u){if(b.status==="aborted")return y;b.status==="dirty"&&t.dirty(),p.add(b.value)}return{status:t.value,value:p}}const o=[...s.data.values()].map((u,p)=>n._parse(new N(s,u,s.path,p)));return s.common.async?Promise.all(o).then(u=>i(u)):i(o)}min(e,t){return new K({...this._def,minSize:{value:e,message:m.toString(t)}})}max(e,t){return new K({...this._def,maxSize:{value:e,message:m.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}K.create=(a,e)=>new K({valueType:a,minSize:null,maxSize:null,typeName:f.ZodSet,...g(e)});class Q extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.function)return h(t,{code:l.invalid_type,expected:c.function,received:t.parsedType}),y;function s(o,u){return ge({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ye(),Y].filter(p=>!!p),issueData:{code:l.invalid_arguments,argumentsError:u}})}function r(o,u){return ge({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ye(),Y].filter(p=>!!p),issueData:{code:l.invalid_return_type,returnTypeError:u}})}const n={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof X){const o=this;return C(async function(...u){const p=new R([]),b=await o._def.args.parseAsync(u,n).catch(I=>{throw p.addIssue(s(u,I)),p}),P=await Reflect.apply(i,this,b);return await o._def.returns._def.type.parseAsync(P,n).catch(I=>{throw p.addIssue(r(P,I)),p})})}else{const o=this;return C(function(...u){const p=o._def.args.safeParse(u,n);if(!p.success)throw new R([s(u,p.error)]);const b=Reflect.apply(i,this,p.data),P=o._def.returns.safeParse(b,n);if(!P.success)throw new R([r(b,P.error)]);return P.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Q({...this._def,args:$.create(e).rest(q.create())})}returns(e){return new Q({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Q({args:e||$.create([]).rest(q.create()),returns:t||q.create(),typeName:f.ZodFunction,...g(s)})}}class oe extends v{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}oe.create=(a,e)=>new oe({getter:a,typeName:f.ZodLazy,...g(e)});class de extends v{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return h(t,{received:t.data,code:l.invalid_literal,expected:this._def.value}),y}return{status:"valid",value:e.data}}get value(){return this._def.value}}de.create=(a,e)=>new de({value:a,typeName:f.ZodLiteral,...g(e)});function Ve(a,e){return new V({values:a,typeName:f.ZodEnum,...g(e)})}class V extends v{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return h(t,{expected:_.joinValues(s),received:t.parsedType,code:l.invalid_type}),y}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),s=this._def.values;return h(t,{received:t.data,code:l.invalid_enum_value,options:s}),y}return C(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return V.create(e)}exclude(e){return V.create(this.options.filter(t=>!e.includes(t)))}}V.create=Ve;class le extends v{_parse(e){const t=_.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==c.string&&s.parsedType!==c.number){const r=_.objectValues(t);return h(s,{expected:_.joinValues(r),received:s.parsedType,code:l.invalid_type}),y}if(t.indexOf(e.data)===-1){const r=_.objectValues(t);return h(s,{received:s.data,code:l.invalid_enum_value,options:r}),y}return C(e.data)}get enum(){return this._def.values}}le.create=(a,e)=>new le({values:a,typeName:f.ZodNativeEnum,...g(e)});class X extends v{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.promise&&t.common.async===!1)return h(t,{code:l.invalid_type,expected:c.promise,received:t.parsedType}),y;const s=t.parsedType===c.promise?t.data:Promise.resolve(t.data);return C(s.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}X.create=(a,e)=>new X({type:a,typeName:f.ZodPromise,...g(e)});class j extends v{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===f.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,n={addIssue:i=>{h(s,i),i.fatal?t.abort():t.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),r.type==="preprocess"){const i=r.transform(s.data,n);return s.common.issues.length?{status:"dirty",value:s.data}:s.common.async?Promise.resolve(i).then(o=>this._def.schema._parseAsync({data:o,path:s.path,parent:s})):this._def.schema._parseSync({data:i,path:s.path,parent:s})}if(r.type==="refinement"){const i=o=>{const u=r.refinement(o,n);if(s.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?y:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?y:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ee(i))return i;const o=r.transform(i.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>ee(i)?Promise.resolve(r.transform(i.value,n)).then(o=>({status:t.value,value:o})):i);_.assertNever(r)}}j.create=(a,e,t)=>new j({schema:a,typeName:f.ZodEffects,effect:e,...g(t)});j.createWithPreprocess=(a,e,t)=>new j({schema:e,effect:{type:"preprocess",transform:a},typeName:f.ZodEffects,...g(t)});class L extends v{_parse(e){return this._getType(e)===c.undefined?C(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}L.create=(a,e)=>new L({innerType:a,typeName:f.ZodOptional,...g(e)});class B extends v{_parse(e){return this._getType(e)===c.null?C(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}B.create=(a,e)=>new B({innerType:a,typeName:f.ZodNullable,...g(e)});class ue extends v{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===c.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ue.create=(a,e)=>new ue({innerType:a,typeName:f.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...g(e)});class xe extends v{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return ve(r)?r.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new R(s.common.issues)},input:s.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new R(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}xe.create=(a,e)=>new xe({innerType:a,typeName:f.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...g(e)});class ke extends v{_parse(e){if(this._getType(e)!==c.nan){const t=this._getOrReturnCtx(e);return h(t,{code:l.invalid_type,expected:c.nan,received:t.parsedType}),y}return{status:"valid",value:e.data}}}ke.create=a=>new ke({typeName:f.ZodNaN,...g(a)});const wt=Symbol("zod_brand");class We extends v{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class he extends v{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?y:r.status==="dirty"?(t.dirty(),ze(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?y:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new he({in:e,out:t,typeName:f.ZodPipeline})}}class Ee extends v{_parse(e){const t=this._def.innerType._parse(e);return ee(t)&&(t.value=Object.freeze(t.value)),t}}Ee.create=(a,e)=>new Ee({innerType:a,typeName:f.ZodReadonly,...g(e)});const qe=(a,e={},t)=>a?J.create().superRefine((s,r)=>{var n,i;if(!a(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,u=(i=(n=o.fatal)!==null&&n!==void 0?n:t)!==null&&i!==void 0?i:!0,p=typeof o=="string"?{message:o}:o;r.addIssue({code:"custom",...p,fatal:u})}}):J.create(),xt={object:k.lazycreate};var f;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(f||(f={}));const kt=(a,e={message:`Input not instance of ${a.name}`})=>qe(t=>t instanceof a,e),Fe=Z.create,Ke=M.create,Et=ke.create,Tt=z.create,Be=te.create,St=F.create,Ct=_e.create,Zt=ae.create,Rt=se.create,Ot=J.create,jt=q.create,Pt=A.create,It=be.create,Nt=O.create,$t=k.create,Dt=k.strictCreate,Lt=re.create,At=Te.create,Ut=ne.create,Mt=$.create,zt=ie.create,Vt=we.create,Wt=K.create,qt=Q.create,Ft=oe.create,Kt=de.create,Bt=V.create,Ht=le.create,Qt=X.create,$e=j.create,Jt=L.create,Xt=B.create,Gt=j.createWithPreprocess,Yt=he.create,ea=()=>Fe().optional(),ta=()=>Ke().optional(),aa=()=>Be().optional(),sa={string:a=>Z.create({...a,coerce:!0}),number:a=>M.create({...a,coerce:!0}),boolean:a=>te.create({...a,coerce:!0}),bigint:a=>z.create({...a,coerce:!0}),date:a=>F.create({...a,coerce:!0})},ra=y;var d=Object.freeze({__proto__:null,defaultErrorMap:Y,setErrorMap:dt,getErrorMap:ye,makeIssue:ge,EMPTY_PATH:lt,addIssueToContext:h,ParseStatus:S,INVALID:y,DIRTY:ze,OK:C,isAborted:Re,isDirty:Oe,isValid:ee,isAsync:ve,get util(){return _},get objectUtil(){return Ze},ZodParsedType:c,getParsedType:U,ZodType:v,ZodString:Z,ZodNumber:M,ZodBigInt:z,ZodBoolean:te,ZodDate:F,ZodSymbol:_e,ZodUndefined:ae,ZodNull:se,ZodAny:J,ZodUnknown:q,ZodNever:A,ZodVoid:be,ZodArray:O,ZodObject:k,ZodUnion:re,ZodDiscriminatedUnion:Te,ZodIntersection:ne,ZodTuple:$,ZodRecord:ie,ZodMap:we,ZodSet:K,ZodFunction:Q,ZodLazy:oe,ZodLiteral:de,ZodEnum:V,ZodNativeEnum:le,ZodPromise:X,ZodEffects:j,ZodTransformer:j,ZodOptional:L,ZodNullable:B,ZodDefault:ue,ZodCatch:xe,ZodNaN:ke,BRAND:wt,ZodBranded:We,ZodPipeline:he,ZodReadonly:Ee,custom:qe,Schema:v,ZodSchema:v,late:xt,get ZodFirstPartyTypeKind(){return f},coerce:sa,any:Ot,array:Nt,bigint:Tt,boolean:Be,date:St,discriminatedUnion:At,effect:$e,enum:Bt,function:qt,instanceof:kt,intersection:Ut,lazy:Ft,literal:Kt,map:Vt,nan:Et,nativeEnum:Ht,never:Pt,null:Rt,nullable:Xt,number:Ke,object:$t,oboolean:aa,onumber:ta,optional:Jt,ostring:ea,pipeline:Yt,preprocess:Gt,promise:Qt,record:zt,set:Wt,strictObject:Dt,string:Fe,symbol:Ct,transformer:$e,tuple:Mt,undefined:Zt,union:Lt,unknown:jt,void:It,NEVER:ra,ZodIssueCode:l,quotelessJson:ot,ZodError:R}),na=Object.defineProperty,ia=(a,e,t)=>e in a?na(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,w=(a,e,t)=>(ia(a,typeof e!="symbol"?e+"":e,t),t),oa=(a,e,t)=>{if(!e.has(a))throw TypeError("Cannot "+t)},da=(a,e,t)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,t)},De=(a,e,t)=>(oa(a,e,"access private method"),t);const W="Cannot have an empty URI",Le="predicate must be provided",T=a=>!a;var fe,Pe;class la{constructor(e="http://localhost:3030/",t="ds",s="http://telicent.io/data/",r=""){da(this,fe),w(this,"defaultSecurityLabel"),w(this,"dataset"),w(this,"defaultUriStub"),w(this,"triplestoreUri"),w(this,"queryEndpoint"),w(this,"updateEndpoint"),w(this,"dc"),w(this,"xsd"),w(this,"rdf"),w(this,"rdfs"),w(this,"owl"),w(this,"telicent"),w(this,"sparqlPrefixes"),w(this,"rdfType"),w(this,"rdfProperty"),w(this,"rdfsClass"),w(this,"rdfsSubClassOf"),w(this,"rdfsSubPropertyOf"),w(this,"rdfsLabel"),w(this,"rdfsComment"),w(this,"rdfsDomain"),w(this,"rdfsRange"),w(this,"owlClass"),w(this,"owlDatatypeProperty"),w(this,"owlObjectProperty"),w(this,"telicentStyle"),this.defaultSecurityLabel=r,this.dataset=t,this.defaultUriStub=s,this.triplestoreUri=e,this.queryEndpoint=this.triplestoreUri+t+"/query?query=",this.updateEndpoint=this.triplestoreUri+t+"/update",this.dc="http://purl.org/dc/elements/1.1/",this.xsd="http://www.w3.org/2001/XMLSchema#",this.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",this.rdfs="http://www.w3.org/2000/01/rdf-schema#",this.owl="http://www.w3.org/2002/07/owl#",this.telicent="http://telicent.io/ontology/",this.sparqlPrefixes=`PREFIX xsd: <${this.xsd}> PREFIX dc: <${this.dc}> PREFIX rdf: <${this.rdf}> PREFIX rdfs: <${this.rdfs}> PREFIX owl: <${this.owl}> PREFIX telicent: <${this.telicent}> `,this.rdfType=`${this.rdf}type`,this.rdfProperty=`${this.rdf}Property`,this.rdfsClass=`${this.rdfs}Class`,this.rdfsSubClassOf=`${this.rdfs}subClassOf`,this.rdfsSubPropertyOf=`${this.rdfs}subPropertyOf`,this.rdfsLabel=`${this.rdfs}label`,this.rdfsComment=`${this.rdfs}comment`,this.rdfsDomain=`${this.rdfs}domain`,this.rdfsRange=`${this.rdfs}range`,this.owlClass=`${this.owl}#Class`,this.owlDatatypeProperty=`${this.owl}DatatypeProperty`,this.owlObjectProperty=`${this.owl}ObjectProperty`,this.telicentStyle=`${this.telicent}style`}async runQuery(e){if(T(e))throw Error("runQuery: A valid query is required");const t=await fetch(this.queryEndpoint+encodeURIComponent(this.sparqlPrefixes+e));if(!t.ok)throw t.statusText;return await t.json()}async runUpdate(e,t){let s=t??this.defaultSecurityLabel;T(s)&&console.warn("Security label is being set to an empty string. Please check your security policy as this may make the data inaccessible");var r={method:"POST",headers:{Accept:"*/*","Content-Type":"application/sparql-update"},body:this.sparqlPrefixes+e};const n=await fetch(this.updateEndpoint,r);if(!n.ok)throw n.statusText;return n.text()}async insertTriple(e,t,s,r,n,i){var o=De(this,fe,Pe).call(this,s,r,i);return await this.runUpdate("INSERT DATA {<"+e+"> <"+t+"> "+o+" . }",n)}async deleteTriple(e,t,s,r,n){var i=De(this,fe,Pe).call(this,s,r,n);return await this.runUpdate("DELETE DATA {<"+e+"> <"+t+"> "+i+" . }")}async deleteNode(e,t=!1){if(T(e))throw Error(W);await this.runUpdate("DELETE WHERE {<"+e+"> ?p ?o . }"),t||await this.runUpdate("DELETE WHERE {?s ?p <"+e+">}")}async deleteRelationships(e,t){if(T(e))throw Error(W);if(T(t))throw Error("Cannot have an empty predicate");await this.runUpdate(`DELETE WHERE {<${e}> <${t}> ?o . }`)}async instantiate(e,t,s){if(T(e))throw Error("Cannot have an empty cls");return t||(t=this.defaultUriStub+crypto.randomUUID()),await this.insertTriple(t,this.rdfType,e,void 0,s),t}async addLiteral(e,t,s,r=!1){if(T(e))throw new Error(W);if(T(t))throw new Error("Cannot have an empty predicate");if(T(s))throw new Error("Cannot have empty text in a triple");r&&await this.deleteRelationships(e,t),await this.insertTriple(e,t,s,"LITERAL")}async addLabel(e,t){if(T(e))throw new Error(W);if(T(t))throw new Error("invalid label string");await this.insertTriple(e,this.rdfsLabel,t)}async addComment(e,t){if(T(e))throw new Error(W);if(T(t))throw new Error("invalid comment string");await this.insertTriple(e,this.rdfsComment,t)}async getRelated(e,t){var s;if(T(e))throw new Error(W);if(T(t))throw new Error(Le);const r=`SELECT ?related WHERE {<${e}> ?pred ?related . ?pred <${this.rdfsSubPropertyOf}>* <${t}> .}`,n=await this.runQuery(r);return(s=n==null?void 0:n.results)!=null&&s.bindings?n.results.bindings.map(i=>i.related.value):[]}async getRelating(e,t){var s;if(T(e))throw new Error(W);if(T(t))throw new Error(Le);const r=`SELECT ?relating WHERE {?relating ?pred <${e}> . ?pred <${this.rdfsSubPropertyOf}>* <${t}> . }`,n=await this.runQuery(r);return(s=n==null?void 0:n.results)!=null&&s.bindings?n.results.bindings.map(i=>i.relating.value):[]}}fe=new WeakSet,Pe=function(a,e="URI",t){if(e==="URI")var s=`<${a}>`;else if(e=="LITERAL"){var s=`"${a}"`;t&&(s=`${s}^^${t}`)}else throw new Error("unknown objectType");return s};const He=d.object({bgColour:d.string(),colour:d.string(),borderColour:d.string().optional(),height:d.number(),width:d.number(),icon:d.string(),shape:d.enum(["roundrectangle","parallelogram","diamond"]),x:d.number(),y:d.number()}),ua=d.object({uri:d.string(),rdfType:d.array(d.string()),labels:d.array(d.string()),comments:d.array(d.string()),defaultStyle:He});class Qe{constructor(e){x(this,"uri",""),x(this,"rdfType",[]),x(this,"labels",[]),x(this,"comments",[]),x(this,"defaultStyle",{bgColour:"#888",colour:"#000",icon:"fa-solid fa-question",height:0,width:0,x:0,y:0,shape:"diamond"}),x(this,"predicates",{}),e&&(this.uri=e)}addPredicate(e,t){return e in this.predicates?this.predicates[e].push(t):this.predicates[e]=[t],this}setDefaultStyle(e){return this.defaultStyle=e,this}addRdfType(e){return this.rdfType.push(e),this}addLabel(e){return this.labels.push(e),this}addComment(e){return this.comments.push(e),this}}const Je=d.object({ownedProperties:d.array(d.string()),subClasses:d.array(d.string()),superClasses:d.array(d.string())});class D extends Qe{constructor(e){super(e),x(this,"ownedProperties",[]),x(this,"subClasses",[]),x(this,"superClasses",[])}addSubClass(e){return this.subClasses.push(e),this}addSuperClass(e){return this.superClasses.push(e),this}addOwnedProperties(e){return this.ownedProperties.push(e),this}}const ca=d.object({subProperties:d.array(d.string()),superProperties:d.array(d.string()),domain:d.array(d.string()),range:d.array(d.string())});class ce extends Qe{constructor(){super(...arguments),x(this,"subProperties",[]),x(this,"superProperties",[]),x(this,"domain",[]),x(this,"range",[])}addSubProperty(e){return this.subProperties.push(e),this}addSuperProperty(e){return this.superProperties.push(e),this}addDomain(e){return this.domain.push(e),this}addRange(e){return this.range.push(e),this}}const Ae=(a,e)=>a in e,ha=(a,e,t)=>{a[e]||(a[e]=new D().addSuperClass(t)),a[t]||(a[t]=new D().addSubClass(e))},pa=(a,e,t)=>{const s=a.nodes.allElements[e]??new ce().addSuperProperty(t),r=a.nodes.allElements[t]??new ce().addSubProperty(e);a.nodes.allElements[e]=a.nodes.properties[e]=s,a.nodes.allElements[t]=a.nodes.properties[t]=r},ma=(a,e,t)=>{const s=a.nodes.allElements[e]??new ce().addDomain(t),r=a.nodes.allElements[t]??new D().addOwnedProperties(e);a.nodes.allElements[e]=a.nodes.properties[e]=s,a.nodes.allElements[t]=a.nodes.classes[t]=r},fa=(a,e,t)=>{const s=a.nodes.allElements[e]??new ce().addRange(t),r=a.nodes.allElements[t]??new D;a.nodes.allElements[e]=a.nodes.properties[e]=s,a.nodes.allElements[t]=a.nodes.classes[t]=r},ya=(a,e,t)=>{if(t===a.rdfsClass||t===a.owlClass){const s=a.nodes.allElements[e]??new D().addSuperClass(t);a.nodes.allElements[e]=a.nodes.classes[e]=s}else if(t===a.rdfProperty||t===a.owlDatatypeProperty||t===a.owlObjectProperty){const s=a.nodes.allElements[e]??new ce().addDomain(t),r=a.nodes.allElements[t]??new D;a.nodes.allElements[e]=a.nodes.properties[e]=s,a.nodes.allElements[t]=a.nodes.classes[t]=r}},ga=a=>a instanceof D,va=(a=!1,e,t,s,r)=>{const n=e.nodes.allElements[s];if(!ga(n))throw new Error("should never go here");if(a&&n.addPredicate(t,r),t===e.telicentStyle&&r){const i=JSON.parse(decodeURIComponent(r));n.setDefaultStyle(i)}switch(t){case e.rdfsSubClassOf:ha(e.nodes.allElements,s,r);break;case e.rdfsSubPropertyOf:pa(e,s,r);break;case e.rdfsDomain:ma(e,s,r);break;case e.rdfsRange:fa(e,s,r);break;case e.rdfType:ya(e,s,r),n.addRdfType(r);break;case e.rdfsLabel:n.addLabel(r);break;case e.rdfsComment:n.addComment(r);break}},_a=(a,e=!1)=>t=>{const s=t.s.value,r=t.p.value,n=t.o.value;return t.o.type!=="literal"&&!Ae(n,a.nodes.allElements)&&(a.nodes.allElements[n]=new D(n)),Ae(s,a.nodes.allElements)||(a.nodes.allElements[s]=new D(s)),va(e,a,r,s,n),a.nodes},ba=d.record(ua),Xe=d.record(Je),Ge=d.record(ca),wa=d.union([Ge,Xe,ba]),xa=d.object({allElements:wa,properties:Ge,classes:Xe}),ka=d.object({source:d.string(),target:d.string(),relationship:d.string()}),Ea=d.object({style:He,element:d.string()}),Ta=d.object({uuid:d.string(),title:d.string(),uri:d.string(),diagramElements:d.record(Ea),diagramRelationships:d.record(ka)}),E=d.object({value:d.string(),type:d.string()}),pe=d.object({vars:d.array(d.string())}),Sa=d.object({title:E,uuid:E,source:E,target:E,rel:E,diagRel:E,elem:E,diagElem:E,elemStyle:E}),Ca=d.array(Sa),Za=d.object({head:pe,results:d.object({bindings:Ca})}),Ra=d.object({title:E,uri:E,uuid:E}),Oa=d.array(Ra),ja=d.object({head:pe,results:d.object({bindings:Oa})}),Pa=d.object({cls:E,style:E}),Ia=d.object({head:pe,results:d.object({bindings:d.array(Pa)})});d.record(d.object({defaultStyles:d.object({dark:d.object({backgroundColor:d.string(),color:d.string()}),light:d.object({backgroundColor:d.string(),color:d.string()}),shape:d.string(),borderRadius:d.string(),borderWidth:d.string(),selectedBorderWidth:d.string()}),defaultIcons:d.object({riIcon:d.string(),faIcon:d.string(),faUnicode:d.string(),faClass:d.string()})}));const Na=d.object({s:E,p:E,o:E}),$a=d.object({relationship:E}),Da=d.object({head:pe,results:d.object({bindings:d.array(Na)})}),La=d.object({head:pe,results:d.object({bindings:d.array($a)})}),G=(a,e)=>{try{return e.parse(a)}catch(t){throw console.log(a),t instanceof d.ZodError?new Error(`Validation failed: ${t.message} ${JSON.stringify(a)}`):new Error("Validation failed")}},Aa=a=>G(a,Ia),Ua=a=>G(a,Za),Ma=a=>G(a,Ta),za=a=>G(a,ja),Va=a=>G(a,Da),Wa=a=>G(a,La);var Ie,Ye;class Qa extends la{constructor(e="http://localhost:3030/",t="ontology",s="http://telicent.io/ontology/",r=""){super(e,t,s,r),nt(this,Ie),x(this,"telDiagram"),x(this,"telUUID"),x(this,"telTitle"),x(this,"telElementStyle"),x(this,"telInDiagram"),x(this,"telRepresents"),x(this,"telDiagramElement"),x(this,"telDiagramRelationship"),x(this,"telSourceElem"),x(this,"telTargetElem"),x(this,"nodes",{allElements:{},classes:{},properties:{}}),this.telDiagram=this.telicent+"Diagram",this.telUUID=this.telicent+"uuid",this.telTitle=this.telicent+"title",this.telElementStyle=this.telicent+"elementStyle",this.telInDiagram=this.telicent+"inDiagram",this.telRepresents=this.telicent+"represents",this.telDiagramElement=this.telicent+"DiagramElement",this.telDiagramRelationship=this.telicent+"DiagramRelationship",this.telSourceElem=this.telicent+"sourceElem",this.telTargetElem=this.telicent+"targetElem"}newClass(e,t=this.rdfsClass,s,r){var n=this.instantiate(t,e);return r&&r!==""&&this.addSubClass(e,r),s&&this.setStyle(e,s),n}async getClass(e,t=!0,s=!0,r=!0){var n;const i=new D;if(!t&&!s&&!r)return i;var o=`SELECT ?s ?p ?o WHERE {<${e}> ?p ?o .  BIND (IRI("${e}") as ?s) }`;const u=await this.runQuery(o);return(n=u==null?void 0:u.results)!=null&&n.bindings&&(u.results.bindings.forEach(p=>{const b=p.s.value,P=p.p.value,I=p.o.value;switch(t&&i.addPredicate(P,I),P===this.telicentStyle&&i.setDefaultStyle(JSON.parse(I)),P){case this.rdfsSubClassOf:i.addSuperClass(I);break;case this.rdfType:i.addRdfType(I);break;case this.rdfsLabel:i.addLabel(I);break;case this.rdfsComment:i.addComment(I);break}i.uri=b}),s&&(i.subClasses=await this.getSubClasses(e)),r&&(i.ownedProperties=await this.getDomainProperties(e))),i}async getDomainProperties(e){return await this.getRelating(e,this.rdfsDomain)}async getRangeProperties(e){return await this.getRelating(e,this.rdfsRange)}async getInheritedDomainProperties(e){var t;const s=`SELECT ?prop ?item WHERE {?prop <${this.rdfsDomain}> ?item . <${e}> <${this.rdfsSubClassOf}>* ?item. }`,r=await this.runQuery(s);return(t=r==null?void 0:r.results)!=null&&t.bindings?r.results.bindings.filter(n=>n.item.value!==e).map(n=>({property:n.prop.value,domain:n.item.value})):void 0}async getInheritedRangeProperties(e){var t;const s=`SELECT ?prop ?item WHERE {?prop <${this.rdfsRange}> ?item . <${e}> <${this.rdfsSubClassOf}>* ?item. }`,r=await this.runQuery(s);return(t=r==null?void 0:r.results)!=null&&t.bindings?r.results.bindings.filter(n=>n.item.value!==e).map(n=>({property:n.prop.value,domain:n.item.value})):void 0}addSubClass(e,t){this.insertTriple(e,this.rdfsSubClassOf,t)}async getSubClasses(e){return await this.getRelating(e,this.rdfsSubClassOf)}async getSuperClasses(e,t=!1,s=!1){var r;const n=s?"*":"",i=t?`SELECT ?super WHERE {<${e}> <${this.rdfsSubClassOf}>${n} ?super .}`:`SELECT ?super WHERE {<${e}> ?subRel${n} ?super . ?subRel <${this.rdfsSubPropertyOf}>* <${this.rdfsSubClassOf}> .}`,o=await this.runQuery(i);return(r=o==null?void 0:o.results)!=null&&r.bindings?o.results.bindings.map(u=>u.super.value):void 0}async getStyles(e=[]){var t="";e.length>0&&(t='FILTER (str(?cls) IN ("'+e.join('", "')+'") )');const s=`SELECT ?cls ?style WHERE {?cls <${this.telicentStyle}> ?style . ${t} }`,r=await this.runQuery(s),n=Aa(r).results.bindings;let i={};return n.reduce((o,u)=>(!u.style.value||u.style.value==="undefined"||(o[u.cls.value]=JSON.parse(decodeURIComponent(u.style.value))),o),i)}setStyle(e,t){const s=encodeURIComponent(JSON.stringify(t));this.deleteRelationships(e,this.telicentStyle),this.insertTriple(e,this.telicentStyle,s,"LITERAL")}async getAllElements(e=!1){const t=await it(this,Ie,Ye).call(this,"SELECT * WHERE {?s ?p ?o}",e),s=d.object({top:d.array(Je)});xa.merge(s);const r={...t,top:[]};for(let n in r.classes){const i=r.classes[n];i.superClasses.length===0&&r.top.push(i)}return r}async getAllDiagrams(){const e=`SELECT ?uri ?uuid ?title WHERE {
            ?uri a <${this.telDiagram}> . 
            {?uri <${this.telUUID}> ?uuid} 
            {?uri <${this.telTitle}> ?title } 
        }`,t=await this.runQuery(e);return za(t).results.bindings.map(s=>{const r={uuid:s.uuid.value,title:s.title.value,uri:s.uri.value,diagramElements:{},diagramRelationships:{}};return s.title&&(r.title=s.title.value),s.uuid&&(r.uuid=s.uuid.value),r})}async getDiagram(e){const t=`
        SELECT ?uuid ?title ?diagElem ?elem ?elemStyle ?diagRel ?rel ?source ?target WHERE {
            <${e}> a <${this.telDiagram}> . 
            OPTIONAL {<${e}> <${this.telUUID}> ?uuid} 
            OPTIONAL {<${e}> <${this.telTitle}> ?title } 
            OPTIONAL {
                ?diagElem <${this.telInDiagram}> <${e}> .
                ?diagElem a <${this.telDiagramElement}> .
                ?diagElem <${this.telElementStyle}> ?elemStyle .
                ?diagElem <${this.telRepresents}> ?elem
            }
            OPTIONAL {
                ?diagRel <${this.telInDiagram}> <${e}> .
                ?diagRel a <${this.telDiagramRelationship}> .
                ?diagRel <${this.telRepresents}> ?rel .
                ?diagRel <${this.telSourceElem}> ?source .
                ?diagRel <${this.telTargetElem}> ?target .
            }
        }`,s=await this.runQuery(t),r=Ua(s).results.bindings.reduce((n,i)=>(n.title=i.title.value,n.uuid=i.uuid.value,i.diagElem.value in n.diagramElements||(n.diagramElements[i.diagElem.value]={}),n.diagramElements[i.diagElem.value]={...n.diagramElements[i.diagElem.value],element:i.elem.value,style:JSON.parse(decodeURIComponent(i.elemStyle.value))},i.diagRel.value in n.diagramRelationships||(n.diagramRelationships[i.diagRel.value]={}),n.diagramRelationships[i.diagRel.value]={...n.diagramRelationships[i.diagRel.value],relationship:i.rel.value,source:i.source.value,target:i.target.value},n),{uri:e,uuid:"",title:"",diagramElements:{},diagramRelationships:{}});return Ma(r)}newDiagram(e,t,s,r){s||(s=crypto.randomUUID()),t||(t=this.defaultUriStub+s),this.instantiate(this.telDiagram,t,r),this.setTitle(t,e),this.addLiteral(t,this.telUUID,s)}setTitle(e,t){this.addLiteral(e,this.telTitle,t,!0)}async getAllObjectProperties(){const e=`
      SELECT
        ?relationship
      WHERE {
        ?relationship a owl:ObjectProperty
      }
    `,t=await this.runQuery(e);return Wa(t).results.bindings.map(s=>s.relationship.value)}}Ie=new WeakSet,Ye=async function(a,e=!1){const t=await this.runQuery(a),s=Va(t).results.bindings,r=_a(this,e);return s.forEach(r),this.nodes};const qa=a=>{const e={width:48,height:48};switch(a){case"xs":return{width:24,height:24,fontSize:8};case"sm":return{width:36,height:36,fontSize:10};case"lg":return{width:62,height:62,fontSize:22};default:return e}},Fa=a=>a?{filter:"grayscale(0.7)",opacity:"80%"}:{},Ue=({type:a="",borderColor:e,disabled:t=!1,size:s="base"})=>{const{findIcon:r}=et(),n=r(a),i=!!(n!=null&&n.faIcon);return Se.jsx(tt,{alt:n.alt,"aria-label":n.alt,sx:{borderWidth:2,bordericonProps:"solid",borderColor:e??n.color,color:n.color,backgroundColor:n.backgroundColor,...Fa(t),...qa(s)},children:i?Se.jsx("i",{className:n.faIcon,title:`${n.alt}-icon`}):Se.jsx("p",{children:n.iconFallbackText})})};try{Ue.displayName="TeliTypeIcon",Ue.__docgenInfo={description:`This component can be used to display type/class iconography defined in the
ontology. If the styles cannot be found, the initials will be rendered as a
fallback as demonstrated in the stories.`,displayName:"TeliTypeIcon",props:{borderColor:{defaultValue:null,description:"Can be used to override the border color defined in the ontology",name:"borderColor",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"If true, the component will be rendered in a disabled state",name:"disabled",required:!1,type:{name:"boolean"}},size:{defaultValue:{value:"base"},description:"Used to control the size of the component",name:"size",required:!1,type:{name:"enum",value:[{value:'"base"'},{value:'"xs"'},{value:'"sm"'},{value:'"lg"'}]}},type:{defaultValue:{value:""},description:"Ontology type (class) uri or short uri",name:"type",required:!1,type:{name:"string"}}}}}catch{}export{Ue as T,Qa as q};
